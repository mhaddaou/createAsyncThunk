{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from \"axios\";\nconst BASE_URL = \"https://jsonplaceholder.typicode.com/posts\";\nconst initialState = {\n  posts: [],\n  status: \"idle\",\n  error: \"\"\n};\nexport const fetchPosts = createAsyncThunk(\"posts/fetchPosts\", async () => {\n  const response = await axios.get(BASE_URL);\n  console.log(response.data);\n  return response === null || response === void 0 ? void 0 : response.data;\n});\nexport const deletePost = createAsyncThunk(\"post/deletePost\", async initialPost => {\n  const {\n    id\n  } = initialPost;\n  try {\n    const response = await axios.delete(`${BASE_URL}/${id}`);\n    if ((response === null || response === void 0 ? void 0 : response.status) === 200) return initialPost;\n    return `${response.status} : ${response.statusText}`;\n  } catch (error) {\n    return error.message;\n  }\n});\nconst postsSlice = createSlice({\n  name: 'posts',\n  initialState,\n  reducers: {\n    // ==> normal reducer functions go here\n  },\n  extraReducers(builder) {\n    builder.addCase(fetchPosts.pending, (state, action) => {\n      state.status = \"loading\";\n    }).addCase(fetchPosts.fulfilled, (state, action) => {\n      state.status = \"succeeded\";\n      state.posts = state.posts.concat(action.payload);\n    }).addCase(fetchPosts.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.error.message;\n    }).addCase(deletePost.fulfilled, (state, action) => {\n      if (!(action !== null && action !== void 0 && action.payload.id)) {\n        console.log(\"could not delete\");\n        console.log(action.payload);\n        return;\n      }\n      const {\n        id\n      } = action.payload;\n      const OldPosts = state.posts.filter(post => post.id !== id);\n      state.posts = OldPosts;\n    });\n  }\n});\nexport default postsSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","BASE_URL","initialState","posts","status","error","fetchPosts","response","get","console","log","data","deletePost","initialPost","id","delete","statusText","message","postsSlice","name","reducers","extraReducers","builder","addCase","pending","state","action","fulfilled","concat","payload","rejected","OldPosts","filter","post","reducer"],"sources":["/goinfre/mhaddaou/app/src/FetchSlice.ts"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit'\nimport { createAsyncThunk } from '@reduxjs/toolkit'\nimport axios from \"axios\"\n\nconst BASE_URL = \"https://jsonplaceholder.typicode.com/posts\"\n\nconst initialState = {\n    posts: [],\n    status: \"idle\",\n    error: \"\"\n}\n\nexport const fetchPosts = createAsyncThunk(\"posts/fetchPosts\", async () => {\n    const response = await axios.get(BASE_URL)\n    console.log(response.data)\n    return response?.data\n})\n\nexport const deletePost = createAsyncThunk(\"post/deletePost\", async (initialPost) => {\n    const {id} = initialPost\n    try {\n        const response = await axios.delete(`${BASE_URL}/${id}`);\n        if (response?.status === 200) return initialPost;\n        return `${response.status} : ${response.statusText}`;\n    } catch (error) {\n        return error.message\n    }\n})\n\nconst postsSlice = createSlice({\n  name: 'posts',\n  initialState,\n  reducers: {\n    // ==> normal reducer functions go here\n},\n  extraReducers(builder) {\n        builder\n            .addCase(fetchPosts.pending, (state, action) => {\n                state.status = \"loading\"\n            })\n            .addCase(fetchPosts.fulfilled, (state, action) => {\n                state.status = \"succeeded\"\n                state.posts = state.posts.concat(action.payload);\n            })\n            .addCase(fetchPosts.rejected, (state, action) => {\n                state.status = \"failed\"\n                state.error = action.error.message\n            })\n            .addCase(deletePost.fulfilled, (state, action) => {\n                if (!action?.payload.id) {\n                    console.log(\"could not delete\");\n                    console.log(action.payload)\n                    return \n                }\n\n                const { id } = action.payload;\n                const OldPosts = state.posts.filter(post => \n                post.id !== id)\n                state.posts = OldPosts\n            })\n    }\n})\n\nexport default postsSlice.reducer;"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,gBAAgB,QAAQ,kBAAkB;AACnD,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,QAAQ,GAAG,4CAA4C;AAE7D,MAAMC,YAAY,GAAG;EACjBC,KAAK,EAAE,EAAE;EACTC,MAAM,EAAE,MAAM;EACdC,KAAK,EAAE;AACX,CAAC;AAED,OAAO,MAAMC,UAAU,GAAGP,gBAAgB,CAAC,kBAAkB,EAAE,YAAY;EACvE,MAAMQ,QAAQ,GAAG,MAAMP,KAAK,CAACQ,GAAG,CAACP,QAAQ,CAAC;EAC1CQ,OAAO,CAACC,GAAG,CAACH,QAAQ,CAACI,IAAI,CAAC;EAC1B,OAAOJ,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEI,IAAI;AACzB,CAAC,CAAC;AAEF,OAAO,MAAMC,UAAU,GAAGb,gBAAgB,CAAC,iBAAiB,EAAE,MAAOc,WAAW,IAAK;EACjF,MAAM;IAACC;EAAE,CAAC,GAAGD,WAAW;EACxB,IAAI;IACA,MAAMN,QAAQ,GAAG,MAAMP,KAAK,CAACe,MAAM,CAAE,GAAEd,QAAS,IAAGa,EAAG,EAAC,CAAC;IACxD,IAAI,CAAAP,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEH,MAAM,MAAK,GAAG,EAAE,OAAOS,WAAW;IAChD,OAAQ,GAAEN,QAAQ,CAACH,MAAO,MAAKG,QAAQ,CAACS,UAAW,EAAC;EACxD,CAAC,CAAC,OAAOX,KAAK,EAAE;IACZ,OAAOA,KAAK,CAACY,OAAO;EACxB;AACJ,CAAC,CAAC;AAEF,MAAMC,UAAU,GAAGpB,WAAW,CAAC;EAC7BqB,IAAI,EAAE,OAAO;EACbjB,YAAY;EACZkB,QAAQ,EAAE;IACR;EAAA,CACH;EACCC,aAAaA,CAACC,OAAO,EAAE;IACjBA,OAAO,CACFC,OAAO,CAACjB,UAAU,CAACkB,OAAO,EAAE,CAACC,KAAK,EAAEC,MAAM,KAAK;MAC5CD,KAAK,CAACrB,MAAM,GAAG,SAAS;IAC5B,CAAC,CAAC,CACDmB,OAAO,CAACjB,UAAU,CAACqB,SAAS,EAAE,CAACF,KAAK,EAAEC,MAAM,KAAK;MAC9CD,KAAK,CAACrB,MAAM,GAAG,WAAW;MAC1BqB,KAAK,CAACtB,KAAK,GAAGsB,KAAK,CAACtB,KAAK,CAACyB,MAAM,CAACF,MAAM,CAACG,OAAO,CAAC;IACpD,CAAC,CAAC,CACDN,OAAO,CAACjB,UAAU,CAACwB,QAAQ,EAAE,CAACL,KAAK,EAAEC,MAAM,KAAK;MAC7CD,KAAK,CAACrB,MAAM,GAAG,QAAQ;MACvBqB,KAAK,CAACpB,KAAK,GAAGqB,MAAM,CAACrB,KAAK,CAACY,OAAO;IACtC,CAAC,CAAC,CACDM,OAAO,CAACX,UAAU,CAACe,SAAS,EAAE,CAACF,KAAK,EAAEC,MAAM,KAAK;MAC9C,IAAI,EAACA,MAAM,aAANA,MAAM,eAANA,MAAM,CAAEG,OAAO,CAACf,EAAE,GAAE;QACrBL,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;QAC/BD,OAAO,CAACC,GAAG,CAACgB,MAAM,CAACG,OAAO,CAAC;QAC3B;MACJ;MAEA,MAAM;QAAEf;MAAG,CAAC,GAAGY,MAAM,CAACG,OAAO;MAC7B,MAAME,QAAQ,GAAGN,KAAK,CAACtB,KAAK,CAAC6B,MAAM,CAACC,IAAI,IACxCA,IAAI,CAACnB,EAAE,KAAKA,EAAE,CAAC;MACfW,KAAK,CAACtB,KAAK,GAAG4B,QAAQ;IAC1B,CAAC,CAAC;EACV;AACJ,CAAC,CAAC;AAEF,eAAeb,UAAU,CAACgB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}